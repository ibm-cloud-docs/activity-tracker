---

copyright:
  years: 2019, 2024
lastupdated: "2024-05-24"

keywords:

subcollection: activity-tracker

---

{{site.data.keyword.attribute-definition-list}}


# Managing users and permissions
{: #iam_users_events}



{{site.data.keyword.cloud_notm}} services that are organized in a resource group in your account are managed by using {{site.data.keyword.iamlong}} (IAM). You can monitor IAM actions in your account with the {{site.data.keyword.at_full_notm}} service.
{: shortdesc}


{{../../log-analysis/_include-segments/deprecation_notice.md}}

Account owners are automatically assigned the account administrator role for IAM. As the account administrator, you can assign and manage access for users, create resource groups, create access groups, view billing details and track usage, and create service instances. You provide access for users, service IDs, and access groups by creating policies that set a target for the subject of the policy to access and a role that defines the type of access that is allowed. [Learn more](/docs/account?topic=account-userroles).


## Events that are generated when you invite a user to your account
{: #iam_users_events_add}


| Inviting users                                                          | Actions                                        |
|:------------------------------------------------------------------------|:-----------------------------------------------|
| `Invite a user to an account`                                           | `user-management.user.create` |
| `Invite a user to an account and add user to one or more access groups` | `user-management.user.create`   \n `iam-groups.member.add` one entry per access group selected in the action |
| `Invite a user to an account and assign additional access`              | `user-management.user.create`   \n `iam-groups.member.add` one entry per access group selected in the action   \n `iam-am.policy.create` one entry per service  |
{: caption="Table 1. Actions generated when you invite a user to an account" caption-side="top"}


### Invite a user to the account
{: #iam_users_events_1_1}

When you invite a user to your account, you get an event from the platform service **BSS** and action **user-management.user.create**.

```text
8/Nov/2019:15:49:41 BSS User management service: create user
```
{: screen}

The field **target.name** includes information about the user that is being added.


### Invite a user to the account and add to one or more access groups
{: #iam_users_events_1_2}

When you invite a user, as part of the same request, you can also add this user to 1 or more access groups in your account. For each access group that you select, you get an event from the platform service **iam-groups** with action **iam-groups.member.add**.

```text
8/Nov/2019:15:49:42 iam-groups IAM Access Groups: add member <Access group name>
```
{: screen}

The field **requestData.iam_id** includes information about the user that is being added.

The field **target.name** includes information about the access group to which the user is added.

The **initiator** fields are set to an IBM owned service ID that is used to complete the clean process of the user in the account as a result of the action *user-management.user.add*.


### Invite a user to the account and assign additional access
{: #iam_users_events_1_3}

When you invite a user, you can also assign additional access to the following type of resources:

* *IAM services*: Grant access to IAM-enabled services.

    You get 1 event for each service that you grant the user access. These events are generated by the platform service **iam-am** with action **iam-am.policy.create**.

    ```text
    4/Dec/2019:15:49:44 iam-am IAM Access Management: create policy
    ```
    {: screen}

    The **initiator** fields are set to an IBM owned service ID that is used to create the user's policy in the account as a result of the action *user-management.user.add*.

    In **requestData.body.subjects**, the value of the field **iam_ID** indicates the user for which this policy is created.

    In **requestData.body.roles**, you can see the roles that are granted to this user for the service specified in the value of the field **serviceName** that is available in **requestData.body.resources**.

* *Account management*: Grant access to services like billing, user management, support center, and more.

    You get one event for each service that you grant the user access. These events are generated by the platform service **iam-am** with action **iam-am.policy.create**.

    ```text
    4/Dec/2019:15:49:44 iam-am IAM Access Management: create policy
    ```
    {: screen}

    The **initiator** fields are set to an IBM owned service ID that is used to create the user's policy in the account as a result of the action *user-management.user.add*.

    In **requestData.body.subjects**, the value of the field **iam_ID** indicates the user for which this policy is created.

    In **requestData.body.roles**, you can see the roles that are granted to this user for the service specified in the value of the field **serviceName** that is available in **requestData.body.resources**.


## Events that are generated when you remove a user from the account
{: #iam_users_events_delete}


| Removing users                                                                     | Actions                                        |
|:-----------------------------------------------------------------------------------|:-----------------------------------------------|
| `Remove a user from an account`                                                    | `user-management.user.delete` |
| `Remove a user from an account that is part of one or more access groups`          | `user-management.user.delete`   \n `iam-groups.member.delete` one entry per access group  |
| `Remove a user from an account that has one or more policies assigned`             | `user-management.user.delete`   \n `iam-groups.member.delete` one entry per access group    \n `iam-am.policy.delete` one entry per service policy  |
{: caption="Table 2. Actions generated when you remove a user from an account" caption-side="top"}


When you remove a user from your account, an event from the platform service *BSS* with action **user-management.user.delete** is generated.

```text
4/Dec/2019:19:22:31 BSS User management service: delete user
```
{: screen}

The field **target.name** includes information about the user that is being removed.


* If the user belongs to 1 or more access groups, you get an event for each access group from which the user is removed. These events are generated by the platform service **iam-groups** with action **iam-groups.member.delete**.

    ```text
    4/Dec/2019:19:22:32 iam-groups IAM Access Groups: delete members
    ```
    {: screen}

    The field **responseData.member_id** includes information about the user that is being removed.

    The field **target.id** includes information about the access group from which the user is removed. You can run the command `ibmcloud iam access-groups` to list the access groups and corresponding IDs in your account and identify the access group from which the user is being removed.

    The **initiator** fields are set to an IBM owned service ID that is used to complete the clean process of the user in the account as a result of the action *user-management.user.delete*.

* If the user has one or more policies assigned, you get an event for each policy that is deleted. These events are generated by the platform service **iam-am** with action **iam-am.policy.delete**.

    ```text
    4/Dec/2019:19:22:22 iam-am IAM Access Management: delete policy 36419294-251b-4cde-ad0d-3752b5d73a87
    ```
    {: screen}

    The field **target.id** includes information about the policy that is being deleted.

    The **initiator** fields are set to an IBM owned service ID that is used to complete the clean process of the user in the account as a result of the action *user-management.user.delete*.



## Events that are generated when you work with policies
{: #iam_users_events_policies}


| Working with policies and users                                                 | Actions                                        |
|:--------------------------------------------------------------------------------|:-----------------------------------------------|
| `Add a policy by assigning access to resources`                                 | `iam-am.policy.create`   |
| `Add a policy by assigning access within a resource group to a resource group`  | `iam-am.policy.create` |
| `Add a policy by assigning access within a resource group to a resource group and to a service in the resource group` | `iam-am.policy.create` for the resource group permissions   \n   \n `iam-am.policy.create` for the service permissions within the resource group |
| `Modify a policy`                                                               | `iam-am.policy.update` |
| `Delete a policy`                                                               | `iam-am.policy.delete` |
{: caption="Table 3. Actions generated when you assign a policy to a user" caption-side="top"}


### Add a policy by assigning access to resources
{: #iam_users_events_policies_1}

When you grant permissions to a user through the option **Assign access to resources**, you get an event that is generated by the platform service **iam-am** with action **iam-am.policy.create**.

In **target.id**, you get the GUID of the policy that has been assigned to the user.

In **requestData**, you can get information about the user, and the roles that are granted to this user in the resource group indicated in the field **resource**.

In **requestData.body.subjects**, the value of the field **iam_ID** indicates the user for which this policy is created.

In **requestData.body.roles**, you can see the roles that are granted to this user for the specified **serviceName**.

```text
 "requestData": {
        "url": "",
        "api_name": "postPolicyV1",
        "method": "POST",
        "body": {
            "type": "access",
            "roles": [
                {
                    "role_id": "crn:v1:bluemix:public:iam::::role:Viewer"
                },
                {
                    "role_id": "crn:v1:bluemix:public:iam::::serviceRole:Reader"
                }
            ],
            "resources": [
                {
                    "attributes": [
                        {
                            "name": "accountId",
                            "value": "xxxxxxxxxxxxx"
                        },
                        {
                            "name": "serviceName",
                            "value": "cloudantnosqldb"
                        }
                    ]
                }
            ],
            "subjects": [
                {
                    "attributes": [
                        {
                            "name": "iam_id",
                            "value": "IBMid-xxxxxxxxxx"
                        }
                    ]
                }
            ],
            "scope": "a/xxxxxxxxxxxxxx"
        }
    },
```
{: screen}


### Add a policy by assigning access within a resource group
{: #iam_users_events_policies_2}

You can grant permissions to a user through the option **Assign access within a resource group**.
* You can grant 1 or more roles to a user on a resource group.
* You can also grant, as part of the same request, permisisons to work with a service that is available in that resource group.

When you only grant permissions to a user on a resource group, you get an event that is generated by the platform service **iam-am** with action **iam-am.policy.create**.

```text
4/Dec/2019:22:26:32 iam-am IAM Access Management: create policy
```
{: screen}

In **requestData**, you can get information on the user, and the roles that are granted to this user on the resource group indicated in the **resource** field. In **requestData.body.subjects**, the value of the field **iam_ID** indicates the user for which this policy is created. In **requestData.body.roles**, you can see the roles that are granted to this user for the resource group.

```text
"requestData": {
        "url": "",
        "api_name": "postPolicyV1",
        "method": "POST",
        "body": {
            "type": "access",
            "roles": [
                {
                    "role_id": "crn:v1:bluemix:public:iam::::role:Viewer"
                },
                {
                    "role_id": "crn:v1:bluemix:public:iam::::role:Administrator"
                }
            ],
            "resources": [
                {
                    "attributes": [
                        {
                            "name": "accountId",
                            "value": "xxxxxxxxxxxxxxxx"
                        },
                        {
                            "name": "resourceType",
                            "value": "resource-group"
                        },
                        {
                            "name": "resource",
                            "value": "70c4aebc643e4f7fb65bb4f9312bc88a"
                        }
                    ]
                }
            ],
            "subjects": [
                {
                    "attributes": [
                        {
                            "name": "iam_id",
                            "value": "IBMid-xxxxxxx"
                        }
                    ]
                }
            ],
            "scope": "a/xxxxxxxxxxxxxxxx"
        }
    },
```
{: screen}

You can run the command `ibmcloud resource groups` to get a list of the resource groups in your account. The output of this command includes the ID and name of each resource group.
{: tip}



If in the same request you grant permissions to work with a service, you get a second event that is generated by the platform service **iam-am** with action **iam-am.policy.create**.

In **requestData**, you can get information on the user, and the roles that are granted to this user on the service indicated in the field **serviceName**. In **requestData.body.subjects**, the value of the field **iam_ID** indicates the user for which this policy is created. In **requestData.body.roles**, you can see the roles that are granted to this user to work with the service specified.

```text
4/Dec/2019:22:26:32 iam-am IAM Access Management: create policy
```
{: screen}


```text
"requestData": {
        "url": "",
        "api_name": "postPolicyV1",
        "method": "POST",
        "body": {
            "type": "access",
            "roles": [
                {
                    "role_id": "crn:v1:bluemix:public:iam::::role:Viewer"
                },
                {
                    "role_id": "crn:v1:bluemix:public:iam::::serviceRole:Reader"
                }
            ],
            "resources": [
                {
                    "attributes": [
                        {
                            "name": "accountId",
                            "value": "xxxxxxxxxxxxxxxxxxx"
                        },
                        {
                            "name": "resourceGroupId",
                            "value": "70c4aebc643e4f7fb65bb4f9312bc88a"
                        },
                        {
                            "name": "serviceName",
                            "value": "cloud-object-storage"
                        }
                    ]
                }
            ],
            "subjects": [
                {
                    "attributes": [
                        {
                            "name": "iam_id",
                            "value": "IBMid-xxxxxxxx"
                        }
                    ]
                }
            ],
            "scope": "a/xxxxxxxxxxxxxxxxxxx"
        }
    }
```
{: screen}


### Modify a policy
{: #iam_users_events_policies_3}

When you modify a policy, you get an event that is generated by the platform service **iam-am** with action **iam-am.policy.update**.

```text
4/Dec/2019:22:54:18 iam-am IAM Access Management: update policy 61de2152-a48f-448c-b8ca-bfa9f8319ff4
```
{: screen}

The field **target.id** indicates the policy GUID that is updated.

In **requestData.body.subjects**, the value of the field **iam_ID** indicates the user for which this policy is updated.

In **requestData.body.roles**, you can see the roles that are granted to this user to work with the service specified.


`XXXXXXXXXX  NEED TO ADD INFO ON CHANGE  XXXXXXXXX`


### Delete a policy
{: #iam_users_events_policies_4}

When you remove a policy from a user, you get an event that is generated by the platform service **iam-am** with action **iam-am.policy.delete**.

```text
4/Dec/2019:22:26:32 iam-am IAM Access Management: create policy
```
{: screen}

The field **target.id** indicates the policy GUID that is deleted.

In **requestData**, the name of the user from which this policy is specified is indicated in the field **xxxx**.     `XXXXXXXXX  MISSING user name XXXXXXXXXXXXXXX`


`XXXXXXXXXX  NEED TO ADD INFO ON what ROLES  RG & SERVICE has permissions been removed  XXXXXXXXX`
